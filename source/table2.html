<!DOCTYPE HTML>
<html lang="zh-hans">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link href="skin/css/base.css" rel="stylesheet" />
	<link href="skin/css/common.css" rel="stylesheet" />
	<script src="js/jquery-1.3.2.min.js" type="text/javascript"></script>
	<script src="js/core.js" type="text/javascript"></script>
	<style type="text/css">
	#wrap{width:980px;margin:0 auto}
		header{padding:10px;font-size:16px;background:#0F5B99}
		article{}
			article header{background:#eee;margin:10px 0 0;font-size:14px}
			pre{border:1px solid #ccc;padding:10px;background:#fcfcfc}
	</style>
</head>
<body>
	<div id="wrap">
		
	</div>
	<div id="reflash">点击改变</div>
</body>
<script type="text/javascript">
var gridData = [
	{"CustomerID":"你你你你", "CompanyName":"1212 Futterkiste", "ContactName":"Maria 12", "ContactTitle":"Sales Representative", "Address":"Obere Str. 57", "City":"Berlin", "Region":null, "PostalCode":"12209", "Country":"Germany", "Phone":"030-0074321", "Fax":"030-0076545"},
	{"CustomerID":"ALFK2", "CompanyName":"Alfreds Futterkiste", "ContactName":"Maria Anders", "ContactTitle":"Sales Representative", "Address":"Obere Str. 57", "City":"111", "Region":null, "PostalCode":"12209", "Country":"Germany", "Phone":"030-0074321", "Fax":"030-0076545"}
];

var gridData2 = [
	{"CustomerID":"我我我我", "CompanyName":"12111112", "ContactName":"Maria 12", "ContactTitle":"Sales Representative", "Address":"Obere Str. 57", "City":"Berlin", "Region":null, "PostalCode":"12209", "Country":"Germany", "Phone":"030-0074321", "Fax":"030-0076545"},
	{"CustomerID":"a", "CompanyName":"Alfreds Futterkiste", "ContactName":"Maria Anders", "ContactTitle":"Sales Representative", "Address":"Obere Str. 57", "City":"111", "Region":null, "PostalCode":"12209", "Country":"Germany", "Phone":"030-0074321", "Fax":"030-0076545"}
];


$(function(){
	
	var baseClass = function(){
		this.common = function(options){
			var o = options || {},
				g = this;
			if( !o.data ){ return false; }
			var data    = o.data,
				columns = o.columns || {},
				wrap    = $(o.wrap),
				id      = o.id || 'l-grid-' + (new Date()).valueOf()
				html    = '<div class="l-gird" id="'+ id +'"></div>',
				cls     = '';
			
			wrap.append(html);
			var grid = $('#'+id);
			
			//表头
			var tHeadHtml = '';
			tHeadHtml += '<table>';
			tHeadHtml += '<tr>';
			for(var i = 0, l = columns.length; i < l; i++){
				tHeadHtml += '<th>'+ columns[i].display +'</th>';
			}
			tHeadHtml += '</tr>';
			tHeadHtml += '</table>';
			grid.append(tHeadHtml);
			
			//内容
			var tBodyHtml = '';
			tBodyHtml += '<table>';
			for(var j = 0,l = data.length; j < l; j++){
				tBodyHtml += '<tr>';
				for(var h=0; h < columns.length; h++){
					if( columns[h].render !== undefined ){
						var str = columns[h].render(data[j], j, data[j][columns[h].name]);
						tBodyHtml += '<td>'+ str +'</td>';
					}else{
						tBodyHtml += '<td>'+ data[j][columns[h].name] +'</td>';
					}
				}
				tBodyHtml += '</tr>';
			}
			tBodyHtml += '</table>';
			grid.append(tBodyHtml);
			
			//固定栏
			
			//
			
			//底部
			var tFootHtml = '';
			
			//共享对象
			this.o = o,
			this.id = id;
		}
		this.reflash = function(data){
			var o       = this.o
				columns = o.columns || {},
				wrap    = $(o.wrap),
				id      = this.id,
				html    = '<div class="l-gird" id="'+ id +'"></div>',
				cls     = '';
				
			var grid = $('#'+id);
			
			//内容
			var tBodyHtml = '';
			tBodyHtml += '<table>';
			for(var j = 0,l = data.length; j < l; j++){
				tBodyHtml += '<tr>';
				for(var h=0; h < columns.length; h++){
					if( columns[h].render !== undefined ){
						var str = columns[h].render(data[j], j, data[j][columns[h].name]);
						tBodyHtml += '<td>'+ str +'</td>';
					}else{
						tBodyHtml += '<td>'+ data[j][columns[h].name] +'</td>';
					}
				}
				tBodyHtml += '</tr>';
			}
			tBodyHtml += '</table>';
			grid.append(tBodyHtml);
		}
	}
	grid = new baseClass();
	var grid2 = grid.common,
		grid3 = grid.reflash;
	grid2({
		wrap:'#wrap',
		data: gridData,
		columns: [
			{ display: '表头0', name: 'CustomerID', width: 120, render: function(rdata, rindex, value){
					var h = '<span style="color:#ddd">'+ rdata + rindex + value +'</span>';
					return h;
				}
			},
			{ display: '表头1', name: 'CompanyName', width: 100},
			{ display: '表头2', name: 'ContactName', width: 100},
			{ display: '表头3', name: 'ContactTitle', width: 100},
			{ display: '表头4', name: 'Address', width: 100},
			{ display: '表头5', name: 'City', width: 100},
			{ display: '表头6', name: 'Region', width: 100}
		]
	});

	$('#reflash').click(function(){
		grid3(gridData2);
	})
});
</script>
</html>